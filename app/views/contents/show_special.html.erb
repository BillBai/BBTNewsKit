<div class="page-header">
  <h3> <%= @content.content_type %> <%= @content.id %></h3>
</div>

<div class="row">
  <div class="col-md-8">
    <div class="panel panel-default">
      <div class="panel-heading">
        Content Meta Data
        <%=raw status_label(@content, @content.status) %>
        <%=raw content_type_label(@content, @content.content_type) %>
      </div>
      <div class="panel-body">
        <p>
          <strong>id: </strong>
          <%= @content.id %>
        </p>
        <p>
          <strong> Title: </strong>
          <%= @content.title %>
        <p>
          <strong> Subtitle: </strong>
          <%= @content.subtitle %>
        </p>
        <p>
          <strong> Description: </strong><br/>
          <%= @content.description %>
        </p>

        <p>
          <strong> Header Image:</strong><br/>
          <%= image_tag @content.header_image.url(:thumb) %>
        </p>
      </div>
    </div>
    <hr/>
    <%= render partial: 'list' , locals: {contents: @content.subcontents}%>

  </div>

  <div class="col-md-4">
    <!-- Action panel-->
    <div class="panel panel-primary">
      <div class="panel-heading">
        Actions
      </div>
      <div class="panel-body">
      <% if current_user.have_authority('publish') %>
        <% if @content.draft? %>
            <%= link_to 'Publish', publish_content_path(@content), method: :patch, data: {confirm: 'Are you sure to publish this content?'}, role: 'button', class: 'btn btn-success' %>
            <%= link_to 'Edit', edit_content_path(@content), {role: 'button', class: 'btn btn-default'}%>
        <% elsif @content.pending? %>
            <%= link_to 'Approve', approve_content_path(@content), method: :patch, data: {confirm: 'Are you sure to approve this content?'}, role: 'button', class: 'btn btn-success' %>
        <% else %>
            <%= link_to 'Revoke', revoke_content_path(@content), method: :patch, data: {confirm: 'Are you sure to revoke this content?'}, role: 'button', class: 'btn btn-default' %>
        <% end %>
      <% else %>
        <% if @content.draft? || @content.rejected? %>
            <%= link_to 'Contribute', contribute_content_path(@content), method: :patch, data: {confirm: 'Are you sure to contribute this content?'}, role: 'button', class: 'btn btn-success' %>
            <%= link_to 'Edit', edit_content_path(@content), {role: 'button', class: 'btn btn-default'}%>
        <% elsif not @content.approved? %>
              <%= link_to 'Revoke', revoke_content_path(@content), method: :patch, data: {confirm: 'Are you sure to revoke this content?'}, role: 'button', class: 'btn btn-default' %>
        <% end %>
      <% end %>
        <!-- Single button -->
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Other <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li><%= link_to 'Delete', content_path(@content),
                            method: :delete, data: { confirm: 'Are you sure?'},
                            role: 'button', class: 'btn btn-danger' %>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Action panel END -->

    <!--Publisher panel -->
    <div class="panel panel-default">
      <div class="panel-heading">Publisher</div>
      <div class="panel-body">
        <strong>Publisher:</strong>
        <%= @content.publisher.name %>
      </div>
    </div>
    <!-- Publisher panel END-->

    <!--Section panel -->
    <div class="panel panel-default">
      <div class="panel-heading">Section</div>
      <div class="panel-body">
        <strong>Category:</strong>
        <%= @content.section.category %>
        <br/>
        <strong>Module:</strong>
        <%= @content.section.module %>
      </div>
    </div>
    <!-- Section panel END-->

    <!-- Author panel -->
    <div class="panel panel-default">
      <div class="panel-heading">Author</div>
      <div class="panel-body">
        <strong>Name:</strong>
        <%= @content.user.display_name  %>
      </div>
    </div>
    <!--Author panel END-->
  </div>
</div>